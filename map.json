{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "title": {
    "text": "Global Food Import Dependency (2000â€“2021)",
    "fontSize": 18,
    "fontWeight": "bold",
    "anchor": "start"
  },
  "width": 950,
  "height": 520,
  "projection": {"type": "equalEarth"},
  "params": [
    {
      "name": "selected_year",
      "value": 2021,
      "bind": {
        "input": "range",
        "min": 2000,
        "max": 2021,
        "step": 1,
        "name": "Select Year: "
      }
    }
  ],
  "data": {
    "url": "https://raw.githubusercontent.com/deldersveld/topojson/master/world-countries.json",
    "format": {"type": "topojson", "feature": "countries"}
  },
  "transform": [
    {
      "lookup": "properties.name",
      "from": {
        "data": {
          "url": "https://raw.githubusercontent.com/abon0028/DV2_FoodProductionMalaysia-/main/API_TM.VAL.FOOD.ZS.UN_DS2_en_csv_v2_14837.csv",
          "format": {"type": "csv"}
        },
        "key": "Country Name",
        "fields": [
          "2000",
          "2001",
          "2002",
          "2003",
          "2004",
          "2005",
          "2006",
          "2007",
          "2008",
          "2009",
          "2010",
          "2011",
          "2012",
          "2013",
          "2014",
          "2015",
          "2016",
          "2017",
          "2018",
          "2019",
          "2020",
          "2021"
        ]
      },
      "as": [
        "2000",
        "2001",
        "2002",
        "2003",
        "2004",
        "2005",
        "2006",
        "2007",
        "2008",
        "2009",
        "2010",
        "2011",
        "2012",
        "2013",
        "2014",
        "2015",
        "2016",
        "2017",
        "2018",
        "2019",
        "2020",
        "2021"
      ]
    },
    {
      "calculate": "toNumber(datum[toString(selected_year)])",
      "as": "ImportValue"
    }
  ],
  "mark": {"type": "geoshape", "stroke": "white", "strokeWidth": 0.5},
  "encoding": {
    "color": {
      "field": "ImportValue",
      "type": "quantitative",
      "title": "Food Imports (% of Merchandise Imports)",
      "scale": {"scheme": "cividis"}
    },
    "tooltip": [
      {"field": "properties.name", "title": "Country"},
      {"field": "ImportValue", "title": "Food Imports (%)", "format": ".2f"},
      {"param": "selected_year", "title": "Year"}
    ]
  },
  "config": {
    "background": "#ffffff",
    "view": {"stroke": "transparent"},
    "title": {"fontSize": 18, "font": "Segoe UI"}
  }
}